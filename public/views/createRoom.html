{{ define "createRoom" }}

<!DOCTYPE html>
<html lang="en">
	{{ template "header" .}}

	<body>
		<main class="main">
			<div class="content">
				<div>
					<div class="title"><h1>Scribble</h1></div>

					<div class="subtext">
						<p>Create your own private room</p>
					</div>

					<div class="form-container">
						<form action="/create-room" method="post">
							<div class="form-content">
								<div>
									<label class="form-label" for="capacity">Room size:</label>
									<input
										type="number"
										name="capacity"
										id="capacity"
										min="2"
										max="10"
										required
									/>
								</div>
								<div>
									<button class="btn create-room-btn" type="submit">
										Create
									</button>
								</div>
							</div>
						</form>
					</div>

					{{ if .RoomCreated }}

					<div class="room-created-container">
						<div>
							<a href="{{ .Link }}" class="copy-link"
								><button class="btn">Click here to join</button></a
							>
						</div>

						<div class="img-container">
							<div title="Copy joining link">
								<img
									src="public/assets/copy.png"
									alt="copy icon"
									class="copy-link-img"
								/>
							</div>
						</div>

						<script>
							// copy to clipboard
							const aTag = document.querySelector('.copy-link');
							document
								.querySelector('.copy-link-img')
								.addEventListener('click', () =>
									navigator.clipboard.writeText(aTag.href)
								);

							// disable create btn
							document.querySelector('.create-room-btn').disabled = true;

							// populate capacity in input field
							document.getElementById('capacity').value = '{{ .Capacity }}';
						</script>
					</div>

					{{ end }}

					<!-- run the below script only in debug mode -->
					{{ if .debug }}

					<script>
						document.querySelector('#capacity').value = 4;
						document.querySelector('.copy-link') &&
							(document.querySelector('.copy-link').href =
								'http://localhost:1323/app?join=debug');
					</script>

					{{ end }}
				</div>
			</div>
		</main>
	</body>
</html>

{{ end }}
