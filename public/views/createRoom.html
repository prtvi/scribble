{{ define "createRoom" }}

<!DOCTYPE html>
<html lang="en">
	{{ template "header" .}}

	<body>
		<main class="main">
			<div class="form-container">
				<form action="/create-room" method="post">
					<div class="form-content">
						{{ range .FormParams }}
						<div>
							<div class="form-image-and-label">
								<img
									src="public/assets/images/setting_{{.ImgIdx}}.gif"
									alt=""
								/>
								<label for="{{.ID}}">{{.Label}}</label>
							</div>
							<div class="form-select-container">
								<select id="{{.ID}}" name="{{.ID}}">
									{{ range .Options }} {{ if .Selected }}
									<option value="{{.Value}}" selected>{{.Label}}</option>
									{{ else }}
									<option value="{{.Value}}">{{.Label}}</option>
									{{ end }} {{ end }}
								</select>
							</div>
						</div>
						{{ end }}
					</div>

					<div class="form-btn-container">
						<button class="btn create-room-btn" type="submit">Create</button>
					</div>
				</form>
			</div>

			{{ if .RoomCreated }}

			<div class="container room-created-container">
				<div>
					<a href="{{ .Link }}" class="link"
						><button class="btn">Click here to join!</button></a
					>
				</div>

				<div title="Copy joining link">
					<button class="btn btni copy-link-btn">
						<div>
							<div>
								<span>Copy link</span>
							</div>

							<div class="img-container">
								<img
									src="public/assets/images/copy.png"
									alt="copy icon"
									class="copy-link-img"
								/>
							</div>
						</div>
					</button>
				</div>
			</div>

			<script>
				// copy to clipboard
				const aTag = document.querySelector('.link');
				document
					.querySelector('.copy-link-img')
					.addEventListener('click', () =>
						navigator.clipboard.writeText(aTag.href)
					);

				// disable create btn
				document.querySelector('.create-room-btn').disabled = true;

				// populate capacity in input field
				document.getElementById('players').value = '{{ .Capacity }}';
			</script>

			{{ end }}
		</main>

		{{ if .debug }}
		<script>
			document.querySelector('.link') &&
				(document.querySelector('.link').href =
					'http://localhost:1323/app?join=debug');
		</script>
		{{ end }}
	</body>
</html>

{{ end }}
