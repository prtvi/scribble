{{ define "createRoom" }}

<!DOCTYPE html>
<html lang="en">
	{{ template "header" .}}

	<body>
		<main class="main">
			<div class="form-container">
				<form action="/create-room" method="post">
					<div class="form-content-grid">
						{{ range .FormParams }}
						<div>
							<div class="form-image-and-label" title="{{.Desc}}">
								<img
									src="public/assets/images/setting_{{.ImgIdx}}.gif"
									alt=""
								/>
								<label for="{{.ID}}">{{.Label}}</label>
							</div>
							<div class="form-select-container">
								<select id="{{.ID}}" name="{{.ID}}">
									{{ range .Options }} {{ if .Selected }}
									<option value="{{.Value}}" selected>{{.Label}}</option>
									{{ else }}
									<option value="{{.Value}}">{{.Label}}</option>
									{{ end }} {{ end }}
								</select>
							</div>
						</div>
						{{ end }}
					</div>

					<div class="custom-words-container">
						<div>
							<label for="customWords">Custom words</label>

							<div class="input-checkbox-container">
								<label for="useCustomWordsOnly">Use custom words only</label>
								<input
									type="checkbox"
									name="useCustomWordsOnly"
									id="useCustomWordsOnly"
								/>
							</div>
						</div>
						<div>
							<textarea
								name="customWords"
								id="customWords"
								maxlength="20000"
								spellcheck="false"
								placeholder="Minimum of 10 words. 1-32 characters per word! 20000 characters maximum. Separated by a , (comma)"
							></textarea>
						</div>
					</div>

					<div class="form-btn-container">
						<button class="btn create-room-btn" type="submit">
							Create room
						</button>
					</div>
				</form>

				{{ if .RoomCreated }}

				<div class="room-created-container">
					<div>
						<a href="{{ .Link }}" class="link"
							><button class="btn join-room-btn">Click here to join!</button></a
						>
					</div>

					<div title="Copy joining link">
						<button class="btn btni copy-link-btn">
							<div>
								<div>
									<span>Copy link</span>
								</div>

								<div class="img-container">
									<img
										src="public/assets/images/setting_0.gif"
										alt="copy icon"
										class="copy-link-img"
									/>
								</div>
							</div>
						</button>
					</div>
				</div>

				<script>
					// copy to clipboard
					const aTag = document.querySelector('.link');
					document
						.querySelector('.copy-link-btn')
						.addEventListener('click', () =>
							navigator.clipboard.writeText(aTag.href)
						);

					// disable create btn
					document.querySelector('.create-room-btn').disabled = true;

					// populate input fields
					document.getElementById('players').value = '{{ .Players }}';
					document.getElementById('drawTime').value = '{{ .DrawTime }}';
					document.getElementById('rounds').value = '{{ .Rounds }}';
					document.getElementById('wordCount').value = '{{ .WordCount }}';
					document.getElementById('hints').value = '{{ .Hints }}';
					document.getElementById('wordMode').value = '{{ .WordMode }}';
					document.getElementById('customWords').value = '{{ .CustomWords }}';
					document.getElementById('useCustomWordsOnly').checked =
						'{{ .UseCustomWordsOnly }}' === 'true';
				</script>

				{{ end }}
			</div>
		</main>

		{{ if .debug }}
		<script>
			document.querySelector('.link') &&
				(document.querySelector('.link').href =
					'http://localhost:1323/app?join=debug');
		</script>
		{{ end }}
	</body>
</html>

{{ end }}
